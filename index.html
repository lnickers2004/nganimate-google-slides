<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>Animations in AngularJS</title>

		<meta name="description" content="A framework for easily creating beautiful presentations using HTML">
		<meta name="author" content="Hakim El Hattab">

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<link rel="stylesheet" href="css/reveal.min.css">
    <link rel="stylesheet" href="css/theme/default.css">
    <link rel="stylesheet" href="css/overrides.css">

		<!-- For syntax highlighting -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- If the query includes 'print-pdf', use the PDF print sheet -->
		<script>
			document.write( '<link rel="stylesheet" href="css/print/' + ( window.location.search.match( /print-pdf/gi ) ? 'pdf' : 'paper' ) + '.css" type="text/css" media="print">' );
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body id="body" class=" no-clouds no-grass">
    <div class="clouds"></div>
		<div class="reveal">

			<div class="slides">
				<section>
          <h2><span class="em4">Animations</span> in <span class="em2">AngularJS</span></h2>
          <p>
            Supercharge your ng code with some high level animations
          </p>
          <p>
            By: Matias Niemel√§
          </p>
        </section>

				<section>
					<h2 class="em">@yearofmoo</h2>
          <div id="logo"></div>
          <p>
            <a class="em2" target="_blank" href="http://www.yearofmoo.com">http://www.yearofmoo.com</a>
          </p>
					<p>
            Eight major AngularJS articles.
					</p>

					<p>
            Great resource to learn about <span class="em3">AngularJS</span>.
					</p>
				</section>

				<section>
					<h2 class="em">Slides</h2>
          <p>
            <a target="_blank" href="http://yom.nu/ng-ani-goog-slides" rel="nofollow">http://yom.nu/ng-ani-goog-slides</a>
          </p>
				</section>

        <section>
          <h2 class="em">Animations on the web (the good)</h2>
          <p class="fragment fade-in">
            Solid CSS3 animation browser support
          </p>
          <p class="fragment fade-in">
            Great JS animations libraries available on the web
          </p>
          <p class="fragment fade-in">
            Hardware-accelerated animations
          </p>
          <p class="fragment fade-in">
            DOM APIs are getting better for animations
          </p>
        </section>

        <section>
          <h2 class="em">Animations on the web (the bad)</h2>
          <p class="fragment fade-in">
            Difficult to properly sync animations together
          </p>
          <p class="fragment fade-in">
            CSS animation detection is tricky 
          </p>
          <p class="fragment fade-in">
            Animations are coupled with HTML code
          </p>
          <p class="fragment fade-in">
            Very little isolation from the rest of the application
          </p>
        </section>

        <section>
          <h2 class="em">Animations before ngAnimate</h2>
          <p class="fragment fade-in">
            ngClass was your best bet
          </p>
          <p class="fragment fade-in">
            No way to hook into existing ng directives
          </p>
          <p class="fragment fade-in">
            You can still make your own directives
          </p>
          <p class="fragment fade-in">
            Too much of your own JS code is required
          </p>
          <p class="fragment fade-in">
            HTML code may change due to the presence of animations
          </p>
        </section>

        <section>
          <h2 class="em">ngAnimate</h2>
          <p class="fragment fade-in">
            Introduced in AngularJS 1.1.4
          </p>
          <p class="fragment fade-in">
            Enhanced in AngularJS 1.1.5
          </p>
          <p class="fragment fade-in">
            Remastered &amp; Supercharged in 1.2
          </p>
          <p class="fragment fade-in">
            Exists within a separate module
          </p>
        </section>

        <section>
          <h2 class="em">ngAnimate Features</h2>
          <p class="fragment fade-in">
            Supports CSS3 transition/keyframe animations natively
          </p>
          <p class="fragment fade-in">
            JavaScript callbacks are also supported
          </p>
          <p class="fragment fade-in">
            Automatically manages all state within animation events
          </p>
          <p class="fragment fade-in">
            Various existing ng directives are animation aware
          </p>
          <p class="fragment fade-in">
            Easy way to disable / enable animations
          </p>
        </section>

        <section>
          <h2 class="em">Benefits of using ngAnimate</h2>
          <p class="fragment fade-in">
            Uses only CSS classes to reference animations
          </p>
          <p class="fragment fade-in">
            All animation code is isolated
          </p>
          <p class="fragment fade-in">
            CSS and JS code is plug and play
          </p>
          <p class="fragment fade-in">
            Handles all sniffing, detection and computations for you
          </p>
          <p class="fragment fade-in">
            Highly performant
          </p>
        </section>

        <section>
          <h2 class="em">Basic Use</h2>
          <p class="fragment fade-in">
            Include <span class="em2">angular-animate.js</span> into your application 
          </p>
          <p class="fragment fade-in">
            Set <span class="em2">ngAnimate</span> as a module dep
          </p>
          <p class="fragment fade-in">
            Place a CSS class in your HTML code to reference the animation(s)
          </p>
          <p class="fragment fade-in">
            Create an animation using CSS or JavaScript using the CSS class name
          </p>
        </section>

        <section>
          <h2 class="em">CSS3 Transition Animations</h2>
          <p class="fragment fade-in">
            Two CSS classes required.
          </p>
<div class="fragment fade-in">
<pre class="big-code"><code data-trim>
/* starting styles */
.my-class.ng-EVENT {
  transition:0.5s linear all;
  transform:scale(0.1);
}

/* destination styles */
.my-class.ng-EVENT.ng-EVENT-active {
  transform:scale(1.5);
}
</code></pre>
</div>
        </section>

        <section>
          <h2 class="em">CSS3 Keyframe Animations</h2>
          <p class="fragment fade-in">
            Only one CSS class required.
          </p>
<div class="fragment fade-in">
<pre class="big-code"><code data-trim>
/* animation keyframe CSS */
.my-class.ng-EVENT {
  animation:0.5s my_animation;
}

/* animation CSS (from &amp; to) */
@keyframes my_animation {
  from { background:blue; }
  to { background:red; }
}
</code></pre>
</div>
        </section>

        <section>
          <h2 class="em">More Info about CSS transitions/animations</h2>
          <p class="fragment fade-in">
            Checks CSS classes each time on an element
          </p>
          <p class="fragment fade-in">
            CSS styles can be changed via media queries
          </p>
          <p class="fragment fade-in">
            An additional CSS stylesheet can be added/removed
          </p>
        </section>

        <section>
          <h2 class="em">JavaScript Animations</h2>
          <p class="fragment fade-in">
            Defined just like a service is defined
          </p>
<div class="fragment fade-in">
<pre class="big-code"><code data-trim>
ngModule.animation('.my-class', function(inject) {
  return {
    EVENT : function(element, done) {
      /* run your animation using your own JS code */
      runMyAnimation(element, done);

      return function(cancelled) {
        closeMyAnimation(element);
      };
    }
  };
});
</code></pre>
</div>
        </section>

        <section>
          <h2 class="em">Animation-aware Directives</h2>
          <p class="fragment fade-in">
            ngAnimate actives the following directives
          </p>
          <table class="yom-table fragment fade-in" id="animation-inputs">
            <thead>
              <tr>
                <th>Directive</th>
                <th>Events</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>ngRepeat</td>
                <td>enter, move, leave</td>
              </tr>
              <tr>
                <td>ngView</td>
                <td>enter, leave</td>
              </tr>
              <tr>
                <td>ngSwitch, ngInclude, ngIf</td>
                <td>enter, leave</td>
              </tr>
              <tr>
                <td>ngClass</td>
                <td>addClass, removeClass</td>
              </tr>
              <tr>
                <td>ngHide, ngShow</td>
                <td>addClass('.ng-hide') <br /> removeClass('.ng-hide')</td>
              </tr>
            </tbody>
          </table>
        </section>

        <section>
          <h2 class="em">Let's put something together</h2>
          <p class="fragment fade-in">
            <a target="_blank" href="http://yom.nu/ng-ani-google-simple" rel="nofollow">http://yom.nu/ng-ani-google-simple</a>
          </p>
          <p class="fragment fade-in">
            <a target="_blank" href="http://yom.nu/ng-ani-goog-code" rel="nofollow">http://yom.nu/ng-ani-goog-code</a>
          </p>
        </section>

        <section>
          <h2 class="em">Steps involved in Animation</h2>
          <p class="fragment fade-in">
            1. A scope change happens and some directive does its thing
          </p>
          <p class="fragment fade-in">
            2. A DOM operation is called which is handled by the <span class="em2">$animate</span> service
          </p>
          <p class="fragment fade-in">
            3. An extra digest occurs or the animation starts right away
          </p>
          <p class="fragment fade-in">
            4. Checks for anything disabled
          </p>
          <p class="fragment fade-in">
            5. Grabs the CSS classes and triggers the animations that match that CSS class
          </p>
          <p class="fragment fade-in">
            6. CSS transitions / keyframes + JS animations are triggered one by one
          </p>
          <p class="fragment fade-in">
            7. getComputedStyle -> animate CSS transitions/animations
          </p>
          <p class="fragment fade-in">
            8. Close the animation -> perform any required DOM operations
          </p>
        </section>

        <section>
          <h2 class="em">Animating ngView</h2>
          <p class="fragment fade-in">
            Let's use CSS transitions:
              <span class="em2">enter</span>,
              <span class="em2">leave</span>
          </p>
<div class="cols two-col">
  <div class="col">
    <pre class="big-code fragment fade-in"><code data-trim>
.view.ng-enter {
  transition:1s linear all; 
  position:relative;
  left:100px;
  opacity:0;
}
.view.ng-enter.ng-enter-active {
  opacity:1;
  left:0px;
}
    </code></pre>
  </div>
  <div class="col">
    <pre class="big-code fragment fade-in"><code data-trim>
.view.ng-leave {
  transition:1s linear all; 
  position:relative;
  opacity:1;
  left:0px;
}
.view.ng-leave.ng-leave-active {
  opacity:0;
  left:-100px;
}
    </code></pre>
  </div>
</div>
        </section>

        <section>
          <h2 class="em">Animating ngRepeat</h2>
          <p class="fragment fade-in">
            Let's use CSS3 animations:
              <span class="em2">enter</span>,
              <span class="em2">leave</span>,
              <span class="em2">move</span>
          </p>
<pre class="big-code fragment fade-in" style="text-align:center;"><code>
&lt;div ng-repeat="item in items" class="repeater"&gt;&lt;/div&gt;

</code></pre>
<div class="cols three-col">
  <div class="col">
    <pre class="big-code fragment fade-in"><code data-trim>
.repeater.ng-enter {
  animation:
    repeater_enter 1s;
}
@keyframes repeater_enter {
  from { opacity:0; }
  to { opacity:1; }
}
    </code></pre>
  </div>
  <div class="col">
    <pre class="big-code fragment fade-in"><code data-trim>
.repeater.ng-leave {
  animation:
    repeater_leave 1s;
}
@keyframes repeater_leave {
  from { opacity:1; }
  to { opacity:0; }
}
    </code></pre>
  </div>
  <div class="col">
    <pre class="big-code fragment fade-in"><code data-trim>
.repeater.ng-move {
  animation:
    repeater_move 1s;
}
@keyframes repeater_move {
  from { opacity:1; }
  to { opacity:0; }
}
    </code></pre>
  </div>
</div>
        </section>

        <section>
          <h2 class="em">Animating ngInclude</h2>
          <p class="fragment fade-in">
            Let's use JS Animations
              <span class="em2">enter</span>,
              <span class="em2">leave</span>
          </p>
<pre class="big-code fragment fade-in" style="text-align:center;"><code>
&lt;div ng-include="tpl" class="slide"&gt;&lt;/div&gt;

</code></pre>
<div class="cols two-col">
  <div class="col">
    <pre class="big-code fragment fade-in"><code data-trim>
myModule.animation('.slide', function() {
  return {
    enter : function(element, done) {
      $(element)
        .css({ opacity:0 })
        .animate({ opacity:1 }, done);
    },
    //...
    </code></pre>
  </div>
  <div class="col">
    <pre class="big-code fragment fade-in"><code data-trim>
    leave : function(element, done) {
      $(element).animate({
        opacity:0
      }, done);
    }
  };
});
    </code></pre>
  </div>
</div>
        </section>

        <section>
          <h2 class="em">Animating ngShow / ngHide</h2>
          <p class="fragment fade-in">
            Let's use JS Animations
              <span class="em2">ng-hide-remove</span>,
              <span class="em2">ng-hide-add</span>
          </p>
<pre class="big-code fragment fade-in" style="text-align:center;"><code>
&lt;div ng-hide="bool" class="show-hide"&gt;&lt;/div&gt;

</code></pre>
<div class="cols two-col">
  <div class="col">
    <pre class="big-code fragment fade-in"><code data-trim>
.show-hide.ng-hide-add {
  transition:0.5s linear all;
  opacity:1;
}
.show-hide.ng-hide-add
  .ng-hide-add-active {

  opacity:0;
}
    </code></pre>
  </div>
  <div class="col">
    <pre class="big-code fragment fade-in"><code data-trim>
.show-hide.ng-hide-remove {
  transition:0.5s linear all;
  opacity:0;
}
.show-hide.ng-hide-remove
  .ng-hide-remove-active {

  opacity:1;
}
    </code></pre>
  </div>
</div>
        </section>

        <section>
          <h2 class="em">Fully animating application</h2>
          <p class="fragment fade-in">
            <a target="_blank" href="http://yom.nu/ng-ani-goog-advanced" rel="nofollow">http://yom.nu/ng-ani-goog-advanced</a>
          </p>
        </section>

        <section>
          <h2 class="em">$animate</h2>
          <p class="fragment fade-in">
            Used to <span class="em2">trigger</span> animations inside directives
          </p>
          <p class="fragment fade-in">
            Skips all animations when disabled or when ngAnimate is not included 
          </p>

        <table class="yom-table fragment fade-in" id="animation-members">
          <thead>
            <th class="first">Event</th>
            <th class="em">class="klass ng-EVENT"</th>
          </thead>
          <tbody>
            <tr>
              <td class="first">enter</td>
              <td>$animate.enter(<span class="em2">element, parent, after, done</span>)</td>
            </tr>
            <tr>
              <td class="first">leave</td>
              <td>$animate.leave(<span class="em2">element, done</span>)</td>
            </tr>
            <tr>
              <td class="first">move</td>
              <td>$animate.move(<span class="em2">element, parent, after, done</span>)</td>
            </tr>
            <tr>
              <td class="first">addClass</td>
              <td>$animate.addClass(<span class="em2">element, className, done</span>)</td>
            </tr>
            <tr>
              <td class="first">removeClass</td>
              <td>$animate.removeClass(<span class="em2">element, className, done</span>)</td>
            </tr>
            <tr>
              <td class="first">enabled</td>
              <td>$animate.enabled(<span class="em2">bool</span>)</td>
            </tr>
          </tbody>
        </table>
        </section>

        <section>
          <h2 class="em">$animate under the hood</h2>
          <p class="fragment fade-in">
            Skips the former animation is a previous animation is called
          </p>
          <p class="fragment fade-in">
            Skips all child animations when a parent animation is animating
          </p>
          <p class="fragment fade-in">
            Caches subsequent getComputedStyle lookups to speed animations 
          </p>
          <p class="fragment fade-in">
            Queues all animations into as few reflows as possible
          </p>
        </section>

        <section>
          <h2 class="em">Testing (sync)</h2>
          <p class="fragment fade-in">
            Test to see that an animation gets fired
          </p>
          <p class="fragment fade-in">
            1. Create a JS animation within your spec
          </p>
          <p class="fragment fade-in">
            2. Create a fake CSS style and examine the generated CSS classes
          </p>
<pre class="big-code"><code data-trim>
it('should animate', function() {
  var interceptedClass;
  module(function($animateProvider) {
    $animateProvider.register('.animated', function() {
      return {
        addClass : function(element, className, done) {
          interceptedClass = className;
          done();
        }
      };
    });
  });
  inject(function($compile, $rootScope, $rootElement) {
    var element = $compile('<div class="animated" ng-class="{on:on}"></div>')($rootScope);
    $rootElement.append(element);

    $rootScope.on = true;
    $rootScope.$digest();

    expect(interceptedClass).toBe('on');
  });
});
</code></pre>
        </section>

        <section>
          <h2 class="em">Testing (async)</h2>
          <p class="fragment fade-in">
            Wait for the entire duration of the animation and compare the styles 
          </p>
          <p class="fragment fade-in">
            Use within the tests if possible to avoid async calls
          </p>
        </section>

        <section>
          <h2 class="em">New plans (post 1.2)</h2>
          <p class="fragment fade-in">
            Improve the compatibility of CSS code
          </p>
          <p class="fragment fade-in">
            Provide a better API for JS animations
          </p>
          <p class="fragment fade-in">
            Staggering animations in both CSS AND JS
          </p>
        </section>

        <section>
          <h2 class="em">Thank you!</h2>
          <div id="slogo"></div>
          <p class="fragment fade-in">
            Please use and experiment with animations so that we can make this tool better
          </p>
          <p class="fragment fade-in">
					  <a href="https://twitter.com/yearofmoo" class="em" target="_blank">@yearofmoo</a>
          </p>
          <p class="fragment fade-in">
            Feel free to contact me via <span class="em">matias@yearofmoo.com</span>
          </p>
        </section>
			</div>

		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.min.js"></script>

		<script>

			// Full list of configuration options available here:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,

        width: 1280,
        height: 700,

				theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
				transition: Reveal.getQueryHash().transition || 'fade', // default/cube/page/concave/zoom/linear/fade/none

				// Optional libraries used to extend on reveal.js
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
					{ src: 'plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
					// { src: 'plugin/search/search.js', async: true, condition: function() { return !!document.body.classList; } }
					// { src: 'plugin/remotes/remotes.js', async: true, condition: function() { return !!document.body.classList; } }
				]
			});
      Reveal.configure({
        keyboard: {
          '192': function() {
            var on = document.body.className.indexOf('no-clouds') >= 0;
            if(on) {
              document.body.className = document.body.className.replace(' no-clouds','');
              document.body.className = document.body.className.replace(' no-grass','');
            }
            else {
              document.body.className += ' no-clouds no-grass';
            }
          }
        }
      });
		</script>

	</body>
</html>
